#-*-coding:UTF-8 -*
#!/usr/bin/env python

import threading
import socket

buffer = 1024
ADDRESS = ('127.0.0.1', 1338)

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
try:
    s.connect(ADDRESS)
    print("Connection réussie")
except:
    print("Connection echoué")
    exit(0)


def receive():
    while 1:
        response = s.recv(buffer)
        if response.decode('utf8') == "":
            break
        print(f"\ri :{response.decode('utf8')}", end="\n=>")


t = threading.Thread(target=receive)
t.start()

while True:
    # receive()
    request = input().strip()
    s.send(bytes(request, 'utf8'))
    if request =='quit()':
        break

s.close()
print("fin du client TCP")
